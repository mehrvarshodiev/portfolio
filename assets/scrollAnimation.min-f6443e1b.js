import{g as _,a as k}from"./index-2db7c438.js";import{l as A,p as E}from"./index-27220a73.js";var p={exports:{}};(function(v,s){Object.defineProperty(s,"__esModule",{value:!0});var g=function(){function o(n,i){for(var e=0;e<i.length;e++){var t=i[e];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}return function(n,i,e){return i&&o(n.prototype,i),e&&o(n,e),n}}(),b=function(n,i,e){var t=!0;e:for(;t;){var a=n,m=i,d=e;t=!1,a===null&&(a=Function.prototype);var l=Object.getOwnPropertyDescriptor(a,m);if(l===void 0){var f=Object.getPrototypeOf(a);if(f===null)return;n=f,i=m,e=d,t=!0,l=f=void 0;continue e}else{if("value"in l)return l.value;var y=l.get;return y===void 0?void 0:y.call(d)}}};function u(o){return o&&o.__esModule?o:{default:o}}function w(o,n){if(!(o instanceof n))throw new TypeError("Cannot call a class as a function")}function S(o,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof n);o.prototype=Object.create(n&&n.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(o,n):o.__proto__=n)}var h=k,P=u(h),T=A,V=u(T),O=E,r=u(O),c=function(o){S(n,o);function n(i){w(this,n),b(Object.getPrototypeOf(n.prototype),"constructor",this).call(this,i),this.serverSide=typeof window>"u",this.listener=(0,V.default)(this.handleScroll.bind(this),50),this.visibility={onScreen:!1,inViewport:!1},this.state={classes:"animated",style:{animationDuration:this.props.duration+"s",opacity:this.props.initiallyVisible?1:0}}}return g(n,[{key:"getElementTop",value:function(e){for(var t=0;e&&e.offsetTop!==void 0&&e.clientTop!==void 0;)t+=e.offsetTop+e.clientTop,e=e.offsetParent;return t}},{key:"getScrollPos",value:function(){return this.scrollableParent.pageYOffset!==void 0?this.scrollableParent.pageYOffset:this.scrollableParent.scrollTop}},{key:"getScrollableParentHeight",value:function(){return this.scrollableParent.innerHeight!==void 0?this.scrollableParent.innerHeight:this.scrollableParent.clientHeight}},{key:"getViewportTop",value:function(){return this.getScrollPos()+this.props.offset}},{key:"getViewportBottom",value:function(){return this.getScrollPos()+this.getScrollableParentHeight()-this.props.offset}},{key:"isInViewport",value:function(e){return e>=this.getViewportTop()&&e<=this.getViewportBottom()}},{key:"isAboveViewport",value:function(e){return e<this.getViewportTop()}},{key:"isBelowViewport",value:function(e){return e>this.getViewportBottom()}},{key:"inViewport",value:function(e,t){return this.isInViewport(e)||this.isInViewport(t)||this.isAboveViewport(e)&&this.isBelowViewport(t)}},{key:"onScreen",value:function(e,t){return!this.isAboveScreen(t)&&!this.isBelowScreen(e)}},{key:"isAboveScreen",value:function(e){return e<this.getScrollPos()}},{key:"isBelowScreen",value:function(e){return e>this.getScrollPos()+this.getScrollableParentHeight()}},{key:"getVisibility",value:function(){var e=this.getElementTop(this.node)-this.getElementTop(this.scrollableParent),t=e+this.node.clientHeight;return{inViewport:this.inViewport(e,t),onScreen:this.onScreen(e,t)}}},{key:"componentDidMount",value:function(){if(!this.serverSide){var e=this.props.scrollableParentSelector;this.scrollableParent=e?document.querySelector(e):window,this.scrollableParent&&this.scrollableParent.addEventListener?this.scrollableParent.addEventListener("scroll",this.listener):console.warn("Cannot find element by locator: "+this.props.scrollableParentSelector),this.props.animatePreScroll&&this.handleScroll()}}},{key:"componentWillUnmount",value:function(){clearTimeout(this.delayedAnimationTimeout),clearTimeout(this.callbackTimeout),this.listener.cancel(),window&&window.removeEventListener&&window.removeEventListener("scroll",this.listener)}},{key:"visibilityHasChanged",value:function(e,t){return e.inViewport!==t.inViewport||e.onScreen!==t.onScreen}},{key:"animate",value:function(e,t){var a=this;this.delayedAnimationTimeout=setTimeout(function(){a.animating=!0,a.setState({classes:"animated "+e,style:{animationDuration:a.props.duration+"s"}}),a.callbackTimeout=setTimeout(t,a.props.duration*1e3)},this.props.delay)}},{key:"animateIn",value:function(e){var t=this;this.animate(this.props.animateIn,function(){t.props.animateOnce||(t.setState({style:{animationDuration:t.props.duration+"s",opacity:1}}),t.animating=!1);var a=t.getVisibility();e&&e(a)})}},{key:"animateOut",value:function(e){var t=this;this.animate(this.props.animateOut,function(){t.setState({classes:"animated",style:{animationDuration:t.props.duration+"s",opacity:0}});var a=t.getVisibility();a.inViewport&&t.props.animateIn?t.animateIn(t.props.afterAnimatedIn):t.animating=!1,e&&e(a)})}},{key:"handleScroll",value:function(){if(!this.animating){var e=this.getVisibility();this.visibilityHasChanged(this.visibility,e)&&(clearTimeout(this.delayedAnimationTimeout),e.onScreen?e.inViewport&&this.props.animateIn?this.animateIn(this.props.afterAnimatedIn):e.onScreen&&this.visibility.inViewport&&this.props.animateOut&&this.state.style.opacity===1&&this.animateOut(this.props.afterAnimatedOut):this.setState({classes:"animated",style:{animationDuration:this.props.duration+"s",opacity:this.props.initiallyVisible?1:0}}),this.visibility=e)}}},{key:"render",value:function(){var e=this,t=this.props.className?this.props.className+" "+this.state.classes:this.state.classes;return P.default.createElement("div",{ref:function(a){e.node=a},className:t,style:Object.assign({},this.state.style,this.props.style)},this.props.children)}}]),n}(h.Component);s.default=c,c.defaultProps={offset:150,duration:1,initiallyVisible:!1,delay:0,animateOnce:!1,animatePreScroll:!0},c.propTypes={animateIn:r.default.string,animateOut:r.default.string,offset:r.default.number,duration:r.default.number,delay:r.default.number,initiallyVisible:r.default.bool,animateOnce:r.default.bool,style:r.default.object,scrollableParentSelector:r.default.string,className:r.default.string,animatePreScroll:r.default.bool},v.exports=s.default})(p,p.exports);var I=p.exports;const D=_(I);export{D as S};
